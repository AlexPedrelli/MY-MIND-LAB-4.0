<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SGI - Sistema de Gerenciamento Integrado</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* ========================================================== */
        /* ESTILOS CSS - TEMA DARK INDUSTRIAL (FINAL CONSOLIDADO)     */
        /* ========================================================== */
        :root {
            /* Cores de Base Industrial */
            --cor-fundo: #151719;          /* Fundo Carv√£o Profundo */
            --cor-base: #2A2E33;           /* Cont√™iner Cinza Chumbo */
            --cor-painel: #3C4248;         /* Pain√©is e Cards */
            --cor-texto-claro: #E0E6EB;    /* Texto Principal */
            --cor-neutra: #7B8593;         /* Texto Secund√°rio/Separador */
            
            /* Cores de Destaque e Status */
            --cor-vermelha: #FF4444;       /* ERRO/Perigo - Vermelho El√©trico */
            --cor-azul: #1E90FF;           /* Janela Azul */
            --cor-preta-janela: #101010;   /* Janela Preta (Escuro S√≥lido) */
            --cor-ciano: #00FFFF;          /* SUCESSO/Destaque - Ciano Neon */
            --cor-alerta: #FFD700;         /* ALERTA/Aten√ß√£o - Amarelo Ouro */
            --cor-vazia: #4C535C;          /* Posi√ß√£o Vazia Estoque */
            --cor-expedicao: #8A2BE2;      /* M√≥dulo Expedi√ß√£o (Roxo Vibrante) */
            --cor-expedicao-vazio: #3A3F44; /* Expedi√ß√£o Vazio */
            --cor-verde-neon: #39FF14;     /* Verde para status EM OPERA√á√ÉO */

            /* Borda sutil para dar profundidade */
            --borda-fina: 1px solid rgba(123, 133, 147, 0.2); 
        }

        /* ========================================================== */
        /* TIPOGRAFIA E LAYOUT BASE                                   */
        /* ========================================================== */
        body {
            font-family: 'Roboto Mono', monospace; 
            margin: 0;
            padding: 20px;
            background-color: var(--cor-fundo); 
            color: var(--cor-texto-claro);
            line-height: 1.5;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 25px;
            background-color: var(--cor-base);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5); 
            border-radius: 4px;
            border: var(--borda-fina);
        }

        h1 {
            font-size: 2.2em;
            text-align: center;
            color: var(--cor-ciano);
            margin-bottom: 25px;
            text-shadow: 0 0 5px rgba(0, 255, 255, 0.5); 
            border-bottom: 2px solid var(--cor-neutra);
            padding-bottom: 10px;
        }

        h2 {
            font-size: 1.5em;
            color: var(--cor-texto-claro);
            text-align: center;
            margin-bottom: 15px;
            margin-top: 30px;
            border-bottom: 1px dashed var(--cor-neutra);
            padding-bottom: 5px;
        }

        h3 {
            margin-top: 0;
            margin-bottom: 15px;
            color: var(--cor-neutra);
            font-size: 1.1em;
            text-transform: uppercase;
            text-align: center;
        }

        /* ========================================================== */
        /* PAIN√âIS DE DADOS E CONTROLES                               */
        /* ===============================

        <div class="dashboard-container">
    
    <div class="resumo-card">
        <table class="resumo-tabela">
            <thead>
                <tr>
                    <th>Status de Estoque</th>
                    <th>Contagem</th>
                    <th>Porcentagem</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="vermelha">Vermelha</td>
                    <td id="count-vermelha">0</td>
                    <td id="percent-vermelha">0%</td>
                </tr>
                <tr>
                    <td class="azul">Azul</td>
                    <td id="count-azul">0</td>
                    <td id="percent-azul">0%</td>
                </tr>
                <tr>
                    <td class="preta">Preta</td>
                    <td id="count-preta">0</td>
                    <td id="percent-preta">0%</td>
                </tr>
                <tr>
                    <td class="vazia">VAZIA</td>
                    <td id="count-vazia">0</td>
                    <td id="percent-vazia">0%</td>
                </tr>
                <tr>
                    <td>**TOTAL DE ESTOQUE**</td>
                    <td colspan="2">28 Posi√ß√µes</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="side-panel">
        
        <div class="status-card oee-card">
            <h3>üìà Indicador de Efici√™ncia (OEE)</h3>
            <div class="oee-line">
                <span>**Disponibilidade (D):**</span>
                <span id="oee-disponibilidade" class="oee-value">100.0%</span>
            </div>
            <div class="oee-line">
                <span>**Performance (P):**</span>
                <span id="oee-performance" class="oee-value">100.0%</span>
            </div>
            <div class="oee-line">
                <span>**Qualidade (Q):**</span>
                <span id="oee-qualidade" class="oee-value">100.0%</span>
            </div>
            <div class="oee-line oee-total">
                <span>**OEE TOTAL:**</span>
                <span id="oee-total-value" class="oee-value ok-oee">100.0%</span>
            </div>
        </div>
        
        <div class="status-card">
            <h3>Estado do M√≥dulo de Processamento (CMP)</h3>
            <div id="processo-status-indicator" class="status-indicator status-repouso">
                STAND-BY
            </div>
            <button id="toggle-status-btn" class="btn-toggle-repouso" onclick="toggleProcessoStatus()">
                INICIAR OPERA√á√ÉO
            </button>
        </div>
        
        <div class="controles-card">
            <h3>Controles de Movimenta√ß√£o de Estoque</h3>
            <label for="tipo-janela">Tipo de Unidade (SKU):</label>
            <select id="tipo-janela">
                <option value="vermelha">Vermelha</option>
                <option value="azul">Azul</option>
                <option value="preta">Preta</option>
            </select>

            <button class="btn-entrada" onclick="handleMovimentacao('entrada')">
                ‚ûï ENTRADA (PRODU√á√ÉO)
            </button>
            
            <button class="btn-saida" onclick="handleMovimentacao('saida')">
                ‚ûñ SA√çDA (TRANSFER√äNCIA)
            </button>
        </div>
    </div>
</div>

        /* ========================================================== */
        /* GRADES (ESTOQUE E EXPEDI√á√ÉO)                               */
        /* ========================================================== */
        .janela-grid { grid-template-columns: repeat(7, 1fr); gap: 8px; }
        .expedicao-grid { grid-template-columns: repeat(6, 1fr); gap: 8px; }

        .janela-item, .expedicao-item {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 90px;
            border-radius: 6px;
            font-weight: bold;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            border: 1px solid var(--cor-painel);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
            color: var(--cor-texto-claro);
        }

        .janela-item:hover, .expedicao-item:hover {
            transform: scale(1.02);
            box-shadow: 0 0 10px var(--cor-ciano);
        }

        /* Cores das Unidades */
        .vermelha { background-color: var(--cor-vermelha); border-color: var(--cor-vermelha); }
        .azul { background-color: var(--cor-azul); border-color: var(--cor-azul); }
        .preta { 
            background-color: var(--cor-preta-janela); 
            border-color: var(--cor-preta-janela); 
            color: var(--cor-neutra); 
        }
        .vazia { 
            background-color: var(--cor-vazia); 
            color: var(--cor-neutra); 
            border-style: dashed;
            border-color: rgba(123, 133, 147, 0.4);
            font-style: normal;
        }

        /* Estilos Expedi√ß√£o Espec√≠ficos */
        .expedicao-item { background-color: var(--cor-expedicao); border-color: var(--cor-expedicao); }
        .expedicao-item.vazio {
            background-color: var(--cor-expedicao-vazio); 
            color: var(--cor-neutra);
            border-style: dashed;
            border-color: var(--cor-expedicao);
        }
        .expedicao-quantidade { font-size: 2em; }


        /* ========================================================== */
        /* BOT√ïES E INPUTS (Controles)                                */
        /* ========================================================== */
        .controles-card label {
            display: block;
            margin-bottom: 5px;
            margin-top: 10px;
            color: var(--cor-neutra);
            font-size: 0.9em;
        }

        .controles-card input, .controles-card select {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 4px;
            background-color: var(--cor-fundo); 
            color: var(--cor-texto-claro);
            border: 1px solid var(--cor-neutra);
            box-sizing: border-box;
        }

        .controles-card button, .status-card button {
            font-family: 'Roboto Mono', monospace; 
            border: none;
            transition: background-color 0.2s, box-shadow 0.2s;
            text-transform: uppercase;
            font-weight: bold;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 4px;
            width: 100%; /* Garante que os bot√µes dos cards laterais preencham */
        }
        .controles-card button:hover, .status-card button:hover {
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
            opacity: 0.9;
        }

        /* Cores dos Bot√µes */
        .btn-entrada { background-color: var(--cor-ciano); color: var(--cor-preta-janela); }
        .btn-saida { background-color: var(--cor-alerta); color: var(--cor-preta-janela); }
        .btn-adicionar-expedicao { background-color: var(--cor-expedicao); color: var(--cor-texto-claro); }
        .btn-expedir { background-color: var(--cor-vermelha); color: var(--cor-texto-claro); }

        .btn-toggle-repouso { background-color: var(--cor-neutra); color: var(--cor-preta-janela); }
        .btn-toggle-trabalhando { background-color: var(--cor-alerta); color: var(--cor-preta-janela); }
    </style>
</head>
<body>

    <div class="container">
        <h1>üî¨ Sistema de Gerenciamento Integrado (SGI)</h1>

        <h2>‚ö° Monitoramento Eletromec√¢nico (TEM/PWR)</h2>
        <div class="ambiental-dashboard">
            <div class="ambiental-item">
                <h4>üå°Ô∏è Temperatura</h4>
                <span id="temp-value" class="ambiental-value ok">25.0¬∞C</span>
            </div>
            <div class="ambiental-item">
                <h4>üíß Umidade</h4>
                <span id="umid-value" class="ambiental-value ok">60%</span>
            </div>
            <div class="ambiental-item">
                <h4>‚ö° Tens√£o (V)</h4>
                <span id="tensao-value" class="ambiental-value ok">220.0 V</span>
            </div>
            <div class="ambiental-item">
                <h4>üîå Corrente (A)</h4>
                <span id="corrente-value" class="ambiental-value ok">15.0 A</span>
            </div>
        </div>
        
        <div class="dashboard-container">
            
            <div class="resumo-card">
                <table class="resumo-tabela">
                    <thead>
                        <tr>
                            <th>Status de Estoque</th>
                            <th>Contagem</th>
                            <th>Porcentagem</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="vermelha">Vermelha</td>
                            <td id="count-vermelha">0</td>
                            <td id="percent-vermelha">0%</td>
                        </tr>
                        <tr>
                            <td class="azul">Azul</td>
                            <td id="count-azul">0</td>
                            <td id="percent-azul">0%</td>
                        </tr>
                        <tr>
                            <td class="preta">Preta</td>
                            <td id="count-preta">0</td>
                            <td id="percent-preta">0%</td>
                        </tr>
                        <tr>
                            <td class="vazia">VAZIA</td>
                            <td id="count-vazia">0</td>
                            <td id="percent-vazia">0%</td>
                        </tr>
                        <tr>
                            <td>**TOTAL DE ESTOQUE**</td>
                            <td colspan="2">28 Posi√ß√µes</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="side-panel">
                
                <div class="status-card">
                    <h3>Estado do M√≥dulo de Processamento (CMP)</h3>
                    <div id="processo-status-indicator" class="status-indicator status-repouso">
                        STAND-BY
                    </div>
                    <button id="toggle-status-btn" class="btn-toggle-repouso" onclick="toggleProcessoStatus()">
                        INICIAR OPERA√á√ÉO
                    </button>
                </div>
                
                <div class="controles-card">
                    <h3>Controles de Movimenta√ß√£o de Estoque</h3>
                    <label for="tipo-janela">Tipo de Unidade (SKU):</label>
                    <select id="tipo-janela">
                        <option value="vermelha">Vermelha</option>
                        <option value="azul">Azul</option>
                        <option value="preta">Preta</option>
                    </select>

                    <button class="btn-entrada" onclick="handleMovimentacao('entrada')">
                        ‚ûï ENTRADA (PRODU√á√ÉO)
                    </button>
                    
                    <button class="btn-saida" onclick="handleMovimentacao('saida')">
                        ‚ûñ SA√çDA (TRANSFER√äNCIA)
                    </button>
                </div>
            </div>
        </div>
        
        <h2>üì¶ Matriz de Buffer: 28 Posi√ß√µes (Raw Stock)</h2>
        <div class="janela-grid" id="janela-grid">
        </div>
        
        <h2>üöö M√≥dulo de Sa√≠da e Distribui√ß√£o (Lote 12)</h2>
        <div class="dashboard-container">
            <div class="controles-card" style="flex: 1;">
                <h3>Controles de Expedi√ß√£o R√°pida</h3>
                <label for="expedicao-posicao-rapida">Posi√ß√£o do M√≥dulo (1-12):</label>
                <input type="number" id="expedicao-posicao-rapida" min="1" max="12" value="1">
                
                <label for="expedicao-quantidade">Quantidade de Lote (unidades):</label>
                <input type="number" id="expedicao-quantidade" min="1" value="1">

                <button class="btn-adicionar-expedicao" onclick="adicionarProducaoExpedicaoRapida()">
                    ‚úèÔ∏è LOAD: Alocar Lote
                </button>
                
                <button class="btn-expedir" onclick="expedirJanelaRapida()">
                    üöö UNLOAD: Despachar Lote
                </button>
            </div>
            
            <div class="expedicao-grid" id="expedicao-grid" style="flex: 2;">
            </div>
        </div>
        
    </div>

    <script>
        // L√ìGICA JAVASCRIPT - CONSOLIDADA E APRIMORADA

        const TOTAL_ESTOQUE = 28;
        const TOTAL_EXPEDICAO = 12;
        const GRID_ESTOQUE = document.getElementById('janela-grid');
        const GRID_EXPEDICAO = document.getElementById('expedicao-grid');
        const TIPOS = ['vermelha', 'azul', 'preta', 'vazia'];
        
        let processoStatus = 'repouso'; 

        // Estado inicial do estoque (28 posi√ß√µes)
        let estoque = [
            'vermelha', 'azul', 'preta', 'vazia', 'vermelha', 'azul', 'preta',
            'azul', 'vermelha', 'vazia', 'preta', 'azul', 'vazia', 'vermelha',
            'preta', 'vazia', 'vermelha', 'azul', 'vazia', 'preta', 'vermelha',
            'vermelha', 'azul', 'preta', 'vazia', 'azul', 'preta', 'vermelha'
        ];
        
        // Estado inicial da Expedi√ß√£o (12 posi√ß√µes com produ√ß√£o ou vazias)
        let expedicao = [
            { quantidade: 0, tipo: 'vazio' },
            { quantidade: 3, tipo: 'vermelha' },
            { quantidade: 0, tipo: 'vazio' },
            { quantidade: 1, tipo: 'preta' },
            { quantidade: 0, tipo: 'vazio' },
            { quantidade: 5, tipo: 'azul' },
            { quantidade: 0, tipo: 'vazio' },
            { quantidade: 0, tipo: 'vazio' },
            { quantidade: 2, tipo: 'vermelha' },
            { quantidade: 0, tipo: 'vazio' },
            { quantidade: 0, tipo: 'vazio' },
            { quantidade: 4, tipo: 'preta' },
        ];


        // 1. Inicializa o Grid Visual de Estoque e Expedi√ß√£o
        function inicializarGrids() {
            GRID_ESTOQUE.innerHTML = '';
            for (let i = 0; i < TOTAL_ESTOQUE; i++) {
                const tipo = estoque[i];
                const item = document.createElement('div');
                item.className = `janela-item ${tipo}`;
                item.id = `estoque-posicao-${i + 1}`; 
                item.innerHTML = tipo === 'vazia' ? 'VAZIA' : `SKU #${i + 1}`;
                item.setAttribute('data-tipo', tipo); 
                GRID_ESTOQUE.appendChild(item);
            }

            GRID_EXPEDICAO.innerHTML = '';
            expedicao.forEach((item, i) => {
                const pos = i + 1;
                const div = document.createElement('div');
                const isVazio = item.quantidade === 0;

                div.className = `expedicao-item ${isVazio ? 'vazio' : item.tipo}`;
                div.id = `expedicao-posicao-${pos}`;
                div.setAttribute('data-posicao', pos);

                if (isVazio) {
                    div.innerHTML = `Posi√ß√£o ${pos}<br>VAZIO`;
                } else {
                    div.innerHTML = `Posi√ß√£o ${pos}: ${item.tipo.toUpperCase()}<br><span class="expedicao-quantidade">${item.quantidade} un.</span>`;
                }
                GRID_EXPEDICAO.appendChild(div);
            });
            
            atualizarContagem(); 
        }

        // 2. Atualiza a contagem na tabela (Estoque)
        function atualizarContagem() {
            const itens = document.querySelectorAll('.janela-item');
            const contagem = { vermelha: 0, azul: 0, preta: 0, vazia: 0 };

            itens.forEach(item => {
                const tipo = item.getAttribute('data-tipo');
                if (contagem.hasOwnProperty(tipo)) {
                    contagem[tipo]++;
                }
            });

            TIPOS.forEach(tipo => {
                const countElement = document.getElementById(`count-${tipo}`);
                const percentElement = document.getElementById(`percent-${tipo}`);
                
                const quantidade = contagem[tipo];
                const percentual = ((quantidade / TOTAL_ESTOQUE) * 100).toFixed(1);

                if (countElement) {
                    countElement.textContent = quantidade;
                }
                if (percentElement) {
                    percentElement.textContent = `${percentual}%`;
                }
            });
        }

        // 3. L√≥gica para alternar o Status de Processo (Terminologia T√©cnica)
        function toggleProcessoStatus() {
            const indicator = document.getElementById('processo-status-indicator');
            const button = document.getElementById('toggle-status-btn');

            if (processoStatus === 'repouso') {
                processoStatus = 'trabalhando';
                indicator.textContent = 'EM OPERA√á√ÉO';
                indicator.classList.remove('status-repouso');
                indicator.classList.add('status-trabalhando');
                button.textContent = 'PAUSAR / STAND-BY';
                button.classList.remove('btn-toggle-repouso');
                button.classList.add('btn-toggle-trabalhando');
            } else {
                processoStatus = 'repouso';
                indicator.textContent = 'STAND-BY';
                indicator.classList.remove('status-trabalhando');
                indicator.classList.add('status-repouso');
                button.textContent = 'INICIAR OPERA√á√ÉO';
                button.classList.remove('btn-toggle-trabalhando');
                button.classList.add('btn-toggle-repouso');
            }
        }
        
        // 4. L√≥gica de Movimenta√ß√£o de Estoque (Entrada/Sa√≠da de 1 unidade)
        function handleMovimentacao(acao) {
            const tipoJanela = document.getElementById('tipo-janela').value;
            const janelas = Array.from(document.querySelectorAll('.janela-item'));
            
            if (acao === 'entrada') {
                const posicaoVazia = janelas.find(j => j.getAttribute('data-tipo') === 'vazia');
                if (posicaoVazia) {
                    posicaoVazia.classList.remove('vazia');
                    posicaoVazia.classList.add(tipoJanela);
                    posicaoVazia.setAttribute('data-tipo', tipoJanela);
                    posicaoVazia.textContent = `SKU #${posicaoVazia.id.split('-')[1]}`;
                    alert(`‚úÖ Entrada: Unidade ${tipoJanela.toUpperCase()} armazenada.`);
                } else {
                    alert('üõë ERRO: O estoque est√° completamente cheio!');
                }
            } else if (acao === 'saida') {
                const janelaParaRemover = janelas.find(j => j.getAttribute('data-tipo') === tipoJanela);
                if (janelaParaRemover) {
                    janelaParaRemover.classList.remove(tipoJanela);
                    janelaParaRemover.classList.add('vazia');
                    janelaParaRemover.setAttribute('data-tipo', 'vazia');
                    janelaParaRemover.textContent = 'VAZIA';
                    alert(`üì¶ Sa√≠da: Unidade ${tipoJanela.toUpperCase()} transferida.`);
                } else {
                    alert(`üõë ERRO: N√£o h√° unidades do tipo ${tipoJanela.toUpperCase()} em estoque!`);
                }
            }
            atualizarContagem(); 
        }
        
        // 5. Fun√ß√£o auxiliar para verificar cor de lote na Expedi√ß√£o
        function getLoteBaseColor(loteIndex) {
            // Verifica a cor em qualquer posi√ß√£o dentro do lote (posi√ß√µes 1 a 4, 5 a 8, 9 a 12)
            for (let i = 0; i < 4; i++) {
                const posicaoGlobal = loteIndex * 4 + i;
                if (expedicao[posicaoGlobal] && expedicao[posicaoGlobal].quantidade > 0) {
                    return expedicao[posicaoGlobal].tipo;
                }
            }
            return 'vazio'; // O lote est√° totalmente vazio
        }

        // 6. ADICIONAR Produ√ß√£o √† Expedi√ß√£o com Quantidade (Controle R√ÅPIDO)
        function adicionarProducaoExpedicaoRapida() {
            const posicao = parseInt(document.getElementById('expedicao-posicao-rapida').value);
            const quantidade = parseInt(document.getElementById('expedicao-quantidade').value);
            const posicaoIndex = posicao - 1; 
            const tipoJanela = document.getElementById('tipo-janela').value; 
            
            if (posicaoIndex < 0 || posicaoIndex >= TOTAL_EXPEDICAO || quantidade <= 0) {
                alert('Entrada inv√°lida. Verifique a Posi√ß√£o (1-12) e a Quantidade (> 0).');
                return;
            }

            // Regra de Lote (Simplificada): Apenas permite adicionar se for a mesma cor ou se o lote estiver vazio.
            const loteIndex = Math.floor(posicaoIndex / 4);
            // let corBaseLote = getLoteBaseColor(loteIndex); // Desabilitado para simplificar a regra

            let item = expedicao[posicaoIndex];
            
            if (item.quantidade === 0) {
                // Posi√ß√£o vazia, inicia a produ√ß√£o
                item.quantidade = quantidade;
                item.tipo = tipoJanela;
            } else if (item.tipo === tipoJanela) {
                // Mesma cor, adiciona a quantidade
                item.quantidade += quantidade;
            } else {
                alert(`‚ö†Ô∏è Alerta: Posi√ß√£o ${posicao} j√° cont√©m ${item.tipo.toUpperCase()}. Por favor, descarregue antes de alocar outro tipo.`);
                return;
            }
            
            // Atualiza o DOM
            const div = document.getElementById(`expedicao-posicao-${posicao}`);
            div.classList.remove('vazio', 'vermelha', 'azul', 'preta');
            div.classList.add(item.tipo);
            div.innerHTML = `Posi√ß√£o ${posicao}: ${item.tipo.toUpperCase()}<br><span class="expedicao-quantidade">${item.quantidade} un.</span>`;
            div.setAttribute('data-tipo', item.tipo);

            alert(`‚úÖ LOAD R√ÅPIDO: +${quantidade} un. de ${item.tipo.toUpperCase()} adicionadas √† Posi√ß√£o ${posicao}. Total: ${item.quantidade} un.`);
        }
        
        // 7. EXPEDIR (Remover da Expedi√ß√£o) com Quantidade (Controle R√ÅPIDO)
        function expedirJanelaRapida() {
            const posicao = parseInt(document.getElementById('expedicao-posicao-rapida').value);
            const posicaoIndex = posicao - 1;
            const quantidadeRemover = parseInt(document.getElementById('expedicao-quantidade').value);
            
            if (posicaoIndex < 0 || posicaoIndex >= TOTAL_EXPEDICAO || quantidadeRemover <= 0) {
                alert('Entrada inv√°lida. Verifique a Posi√ß√£o (1-12) e a Quantidade (> 0).');
                return;
            }

            let item = expedicao[posicaoIndex];
            
            if (item.quantidade === 0) {
                alert('‚ö†Ô∏è Aten√ß√£o: A posi√ß√£o de Expedi√ß√£o selecionada j√° est√° VAZIA.');
                return;
            }
            
            if (quantidadeRemover > item.quantidade) {
                // Remove tudo que existe se a remo√ß√£o for maior que o estoque
                const totalRemovido = item.quantidade;
                item.quantidade = 0;
                
                alert(`‚ö†Ô∏è Aten√ß√£o: Apenas ${totalRemovido} un. foram removidas (Posi√ß√£o ${posicao} esvaziada).`);
            } else {
                // L√≥gica de Remo√ß√£o
                item.quantidade -= quantidadeRemover;
                alert(`üöö UNLOAD R√ÅPIDO: ${quantidadeRemover} un. removidas da Posi√ß√£o ${posicao}. Restam: ${item.quantidade} un.`);
            }

            // Atualiza o DOM
            const div = document.getElementById(`expedicao-posicao-${posicao}`);

            if (item.quantidade === 0) {
                item.tipo = 'vazio';
                div.classList.remove('vermelha', 'azul', 'preta');
                div.classList.add('vazio');
                div.innerHTML = `Posi√ß√£o ${posicao}<br>VAZIO`;
                div.setAttribute('data-tipo', 'vazio');
            } else {
                div.innerHTML = `Posi√ß√£o ${posicao}: ${item.tipo.toUpperCase()}<br><span class="expedicao-quantidade">${item.quantidade} un.</span>`;
            }
        }
        
        // 8. Fun√ß√£o para atualizar e simular Dados Ambientais
        function atualizarDadosAmbientais() {
            const randomValue = (min, max) => (Math.random() * (max - min) + min).toFixed(1);

            // Temperatura (Normal 20-30¬∞C, Alerta > 30¬∞C)
            const temp = parseFloat(randomValue(20, 35));
            let tempClass = 'ok';
            if (temp > 30) tempClass = 'warning';
            if (temp > 33) tempClass = 'danger';
            document.getElementById('temp-value').textContent = `${temp}¬∞C`;
            document.getElementById('temp-value').className = `ambiental-value ${tempClass}`;

            // Umidade (Normal 50-70%, Perigo < 40% ou > 80%)
            const umid = parseFloat(randomValue(35, 85));
            let umidClass = 'ok';
            if (umid < 45 || umid > 75) umidClass = 'warning';
            if (umid < 40 || umid > 80) umidClass = 'danger';
            document.getElementById('umid-value').textContent = `${umid}%`;
            document.getElementById('umid-value').className = `ambiental-value ${umidClass}`;
            
            // Tens√£o (V) (Normal 215-225V, Perigo < 205V ou > 235V)
            const tensao = parseFloat(randomValue(200, 240));
            let tensaoClass = 'ok';
            if (tensao < 210 || tensao > 230) tensaoClass = 'warning';
            if (tensao < 205 || tensao > 235) tensaoClass = 'danger';
            document.getElementById('tensao-value').textContent = `${tensao} V`;
            document.getElementById('tensao-value').className = `ambiental-value ${tensaoClass}`;

            // Corrente (A) (Normal 10-20A, Perigo > 25A)
            const corrente = parseFloat(randomValue(10, 30));
            let correnteClass = 'ok';
            if (corrente > 20) correnteClass = 'warning';
            if (corrente > 25) correnteClass = 'danger';
            document.getElementById('corrente-value').textContent = `${corrente} A`;
            document.getElementById('corrente-value').className = `ambiental-value ${correnteClass}`;
        }


        // Chama a fun√ß√£o inicial ao carregar a p√°gina e inicia a simula√ß√£o ambiental
        window.onload = function() {
            inicializarGrids();
            // Inicia a atualiza√ß√£o dos dados ambientais a cada 3 segundos
            setInterval(atualizarDadosAmbientais, 3000); 
            // Chama uma vez para preencher inicialmente
            atualizarDadosAmbientais(); 
        



        };
    </script>
</body>
</html>



<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Industrial Dark</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css"> 
</head>
<body>
    <div class="container">
        <h1>SISTEMA DE GEST√ÉO INDUSTRIAL V3.0</h1>
        
        <div class="dashboard-container">
            
            <div class="resumo-card">
                <h3>Resumo de Produ√ß√£o</h3>
                </div>

            <div class="side-panel">
                <div class="status-card">
                    <h3>Status Operacional</h3>
                    <div class="status-indicator status-trabalhando">EM OPERA√á√ÉO</div>
                    <button class="btn-toggle-repouso">Alternar para Repouso</button>
                </div>

                <div class="controles-card">
                    <h3>Controles de Lote</h3>
                    <label for="lote">Lote Atual:</label>
                    <input type="text" id="lote" value="LOTE-A45-2025" readonly>
                    <button class="btn-entrada">Iniciar Lote</button>
                </div>
            </div>
        </div>
        
        <h2>Gest√£o de Estoque</h2>
        <div class="janela-grid">
            <div class="janela-item vermelha">Unid. 01</div>
            <div class="janela-item azul">Unid. 02</div>
            <div class="janela-item preta">Unid. 03</div>
            <div class="janela-item vazia">Vazio</div>
        </div>

    </div>
</body>
</html>